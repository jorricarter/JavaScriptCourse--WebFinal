<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0"/>
    <style>canvas {border:2px solid #eee; background-color: #000;}</style>
</head>
<body onload="loadGame()">
<script>
    var ship1; var ship2; var obstacles = []; var score; var gameSize = .2 ;
    var gameWidth = screen.width*gameSize; var gameHeight = screen.height*gameSize;
    var intervalSpeed = 20;
    var gameCanvas = {
        canvas : document.createElement("canvas"),
        start : function() {
            this.canvas.width = gameWidth;
            this.canvas.height = gameHeight;
            this.context = this.canvas.getContext("2d");
            document.body.insertBefore(this.canvas, document.body.childNodes[0]);
            this.scoreCount = 0;
            this.interval = setInterval(updateGameCanvas, intervalSpeed);
        },
        clear : function() {
            this.context.clearRect(0, 0, gameWidth, gameHeight);
        }
    }

    function loadGame() {
        ship1 = new object(15, 25, "blue", gameWidth/2, gameHeight/2, .01);
        score = new scoreTracker("15px Consolas", "white", 10, 20);
        gameCanvas.start();
    }

    function scoreTracker(font, color, startX, startY) {
        this.score = 0;
        this.x = startX;
        this.y = startY;
        this.update = function(){
            gameCanvas.context.font = font;
            gameCanvas.context.fillStyle = color;
            gameCanvas.context.fillText(this.text, this.x, this.y);
        }
    }

    function object(width, height, color, startX, startY, gravity) {
        this.width = width;
        this.height = height;
        this.x = startX;
        this.y = startY;
        this.gravity = gravity;
        this.momentum = 0;
        ctx = gameCanvas.context;
        if (gravity==0) {
            this.update = function() {
                ctx.fillStyle = color;
                ctx.fillRect (this.x,this.y,this.width,this.height);
            }
        }else{
            this.update = function() {
                ctx.fillStyle = color;
                ctx.beginPath();
                ctx.moveTo(this.x-(this.width/2), this.y);
                ctx.lineTo(this.x+(this.width/2), this.y);
                ctx.lineTo(this.x, this.y-this.height);
                ctx.closePath();
                ctx.fill();
            }
            this.move = function() {
                this.momentum += this.gravity;
                this.y += this.momentum;
                if (this.y > gameHeight) {
                    this.y = gameHeight;
                    this.momentum = 0;
                }
                if (this.y < this.height) {
                    this.y = this.height;
                    this.momentum = 0;
                }}
            this.crash = function(object) {
                var left = this.x - this.width/3;
                var right = this.x + this.width/3;
                var top = this.y - this.height/2;
                var bottom = this.y;
                var objectLeft = object.x;
                var objectRight = object.x + object.width;
                var objectTop = object.y;
                var objectBottom = object.y + object.height;
                if ((bottom < objectTop) || (top > objectBottom) || (right < objectLeft) || (left > objectRight)) {
                    return false;
                }
                return true;
            }}
    }

